<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vue 今日新闻</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>  <!-- Vue 3 CDN -->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script> <!-- Axios CDN -->
    <script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script> <!-- ECharts CDN -->
    <style>
        body { font-family: Arial, sans-serif; text-align: center; padding: 20px; }
        .container { max-width: 800px; margin: auto; padding: 20px; }
        .news-card { margin-top: 20px; padding: 20px; background-color: #f9f9f9; border-radius: 10px; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); }
        .news-card h2 { margin-bottom: 10px; font-size: 24px; color: #333; }
        ul { list-style-type: none; padding: 0; }
        li { margin: 10px 0; cursor: pointer; color: #409EFF; }
        li:hover { text-decoration: underline; }
    </style>
</head>
<body>

<div id="app">
    <div class="container">
        <div v-if="newsData">
            <div class="news-card">
                <h2>{{ newsData.date }} 今日新闻</h2>
                <ul>
                    <li v-for="(item, index) in newsData.content" :key="index">
                        {{ item }}
                    </li>
                </ul>
            </div>
        </div>
        <div v-else>
            <p>加载中，稍后再试...</p>
        </div>
    </div>
</div>

<script>
const app = Vue.createApp({
    data() {
        return {
            newsData: null
        };
    },
    methods: {
        // 获取当天日期
        getCurrentDate() {
            const date = new Date();
            const year = date.getFullYear();
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const day = String(date.getDate()).padStart(2, '0');
            return `${year}/${month}/${day}`;  // 格式为 YYYY/MM/DD
        },
        // 获取当天新闻
        async fetchNews() {
            const today = this.getCurrentDate();
            try {
                const apiUrl = `https://news.ravelloh.top/data/${today}.json`;  // 获取该日期的新闻数据
                const response = await axios.get(apiUrl);
                this.newsData = response.data;  // 存储返回的新闻数据
            } catch (error) {
                console.error('获取新闻数据失败:', error);
                this.newsData = null;  // 清空新闻数据
            }
        }
    },
    mounted() {
        this.fetchNews();  // 页面加载时自动获取今日新闻
    }
});

app.mount('#app');
</script>

</body>
</html>
